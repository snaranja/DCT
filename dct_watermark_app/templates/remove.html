<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Remove Watermark</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <style>
      a {
          text-decoration: none;
      }

      /* ปรับแต่ง slide bar */
      input[type="range"] {
          -webkit-appearance: none;
          width: 100%;
          height: 8px;
          background: pink; /* สีชมพู */
          border-radius: 5px;
          outline: none;
          opacity: 0.7;
          transition: opacity .15s ease-in-out;
          margin: 15px 0; /* เพิ่ม margin เพื่อให้ thumb อยู่ตรงกลาง */
      }

      /* จุดเลื่อน (thumb) */
      input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 20px;
          height: 20px;
          background: #ff66b2; /* สีชมพูเข้ม */
          cursor: pointer;
          border-radius: 50%;
          margin-top: -6px; /* เลื่อน thumb ให้ตรงกลาง */
          box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
      }

      input[type="range"]::-moz-range-thumb {
          width: 20px;
          height: 20px;
          background: #ff66b2; /* สีชมพูเข้ม */
          cursor: pointer;
          border-radius: 50%;
          box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
      }

      input[type="range"]::-ms-thumb {
          width: 20px;
          height: 20px;
          background: #ff66b2;
          cursor: pointer;
          border-radius: 50%;
          box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);
      }

      /* ปรับแต่งส่วนที่วิ่งผ่าน (track) */
      input[type="range"]::-webkit-slider-runnable-track {
          width: 100%;
          height: 8px;
          background: pink;
          border-radius: 5px;
      }

      input[type="range"]::-moz-range-track {
          width: 100%;
          height: 8px;
          background: pink;
          border-radius: 5px;
      }

      input[type="range"]::-ms-track {
          width: 100%;
          height: 8px;
          background: transparent;
          border-color: transparent;
          border-width: 12px 0;
          color: transparent;
      }

      input[type="range"]::-ms-fill-lower {
          background: pink;
      }

      input[type="range"]::-ms-fill-upper {
          background: pink;
      }

      input[type="range"]:focus {
          outline: none;
      }

      input[type="range"]:hover {
          opacity: 1;
      }

      .file-upload {
          position: relative;
          display: inline-block;
          overflow: hidden;
          background-color: #ff66b2;
          color: white;
          padding: 10px 20px;
          border-radius: 5px;
          cursor: pointer;
      }

      .file-upload input[type="file"] {
          position: absolute;
          left: 0;
          top: 0;
          opacity: 0;
          cursor: pointer;
      }

      .ctn {
          background-color: #ff66b2;
          color: white;
          padding: 10px 20px;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          transition: background-color 0.3s ease;
      }

      .ctn:hover {
          background-color: #ff4081;
      }

      .preview {
          margin-top: 15px;
          max-width: 100px; /* ปรับขนาดภาพให้เล็กลง */
          height: auto;
          display: block;
          margin: 0 auto; /* จัดกึ่งกลาง */
      }

      .card .content {
          text-align: center;
      }


  </style>
</head>
<body>

  <nav class="navbar">
    <h1 class="logo" style="margin-left : 3%;">Watermark</h1>
    <ul class="nav-links">
        <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="{{ url_for('home') }}">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('embedding') }}">Embbeded Watermark picture</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('removing') }}">Remove Watermark picture</a>
          </li>
    </ul>
  </nav>

  <h1 style="display: flex; justify-content: center; align-items: center; color: whitesmoke;">Remove Watermark</h1>
  <form method="POST" enctype="multipart/form-data">
    <div class="container">
      <div class="card">
        <div class="box">
          <div class="content">
            <h2>01</h2>
            <h3>Add a watermarked image</h3>
            <p>First, you need to upload the image that has the watermark embedded.</p>
            <label class="file-upload">
              Add Watermarked Image
              <input class="form-control" type="file" name="watermarked_image" id="watermarkedImageInput" onchange="previewImage(event, 'watermarkedPreview')" required>
            </label>
            <img id="watermarkedPreview" class="preview" src="#" alt="Watermarked Image Preview" style="display: none;">
          </div>
        </div>
      </div>

      <div class="card">
        <div class="box">
          <div class="content">
            <h2>02</h2>
            <h3>Add the watermark image</h3>
            <p>You need to provide the watermark image that was embedded. Without it, we cannot remove the watermark for you.</p>
            <label class="file-upload">
              Add Watermark Image
              <input class="form-control" type="file" name="watermark_image" id="watermarkImageInput" onchange="previewImage(event, 'watermarkPreview')" required>
            </label>
            <img id="watermarkPreview" class="preview" src="#" alt="Watermark Image Preview" style="display: none;">
          </div>
        </div>
      </div>

      <div class="card">
        <div class="box">
          <div class="content">
            <h2>03</h2>
            <h3>Adjust the opacity watermark</h3>
            <p>If you adjust it correctly, your final image will look seamless, as if there was never a watermark in the first place.</p>
            <input class="range" type="range" name="strength" id="strengthSlider" min="0.05" max="2" step="0.05" value="1" oninput="document.getElementById('strengthValue').innerText = this.value">
            <span id="strengthValue">1</span><br>
            <button type="submit" class="ctn">Remove Watermark</button>
          </div>
        </div>
      </div>
    </div>
  </form>

  <script>
      function previewImage(event, previewId) {
          const reader = new FileReader();
          const preview = document.getElementById(previewId);
          reader.onload = function() {
              if (reader.readyState === 2) {
                  preview.src = reader.result;
                  preview.style.display = 'block';
              }
          }
          reader.readAsDataURL(event.target.files[0]);
      }
  </script>



    <!-- <h1>Remove Watermark</h1>
    <form method="POST" enctype="multipart/form-data">
        <label for="watermarked_image" style="color: whitesmoke;">Watermarked Image:</label>
        <input type="file" name="watermarked_image" required><br><br>

        <label for="watermark_image" style="color: whitesmoke;">Original Watermark Image:</label>
        <input type="file" name="watermark_image" required><br><br>

        <label for="strength">Watermark Removal Strength:</label>
        <input type="number" name="strength" step="0.1" value="10" required>

        <label for="strength">Watermark Removal Strength:</label>
        <input type="range" name="strength" id="strengthSlider" min="0.05" max="2" step="0.05" value="1" oninput="document.getElementById('strengthValue').innerText = this.value">
        <span id="strengthValue">1</span>

        <button type="submit">Remove Watermark</button>
    </form> -->
    {% if result_image %}
      <div class="a1" style="background: rgba(135, 135, 135, .6);padding: 30px;border-radius: 30px;width: 350px;display: flex;justify-content: center; margin: auto;">
          <div class="result-img text-center">
              <h2 style="color: whitesmoke;">FINISHED!</h2>
              <img src="{{ url_for('send_watermarked_file', filename=result_image) }}" alt="Restored Image" class="pic">
              <br>
              <a href="{{ url_for('send_watermarked_file', filename=result_image) }}" class="btn btn-success mt-3" download>Download</a>
          </div>
      </div>
    {% endif %}

    <!-- {% if result_image %}
        <h2>Restored Image:</h2>
        <img src="{{ url_for('send_watermarked_file', filename=result_image) }}" alt="Restored Image" class="pic">
        <br>
        <a href="{{ url_for('send_watermarked_file', filename=result_image) }}" class="btn btn-success mt-3" download>Download</a>
    {% endif %} -->
</body>
</html>
